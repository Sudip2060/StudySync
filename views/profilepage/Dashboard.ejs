<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=JetBrains Mono' rel='stylesheet'>
    <title>Profile</title>
    <link rel="stylesheet" href="/others/Profile_page_CSS/Style1.css">
</head>

<body>
    <%- include('../partials/top'); %>
        <div class="main">
            <div class="left">
                <div class="left-heading">
                    <P>Dashboard</P>
                </div>
                <div class="left-main">
                </div>
            </div>
            <div class="right">
                <div class="image-right">
                    <img src="/images/Profile.png">
                </div>
                <div class="name-holder">
                    <P class="prof_name">Professor Name</P>
                </div>
                <div class="right-buttons-holder">
                    <div class="dashboard-button">
                        <P class="button-label">Dashboard</P>
                    </div>
                    <div class="accountSettings-button">
                        <P class="button-label">Account Settings</P>
                    </div>
                    <div class="changepassword-button">
                        <P class="button-label">Change Password</P>
                    </div>
                    <div class="logout-button">
                        <P class="button-label">Logout</P>
                    </div>
                </div>
            </div>
        </div>

        <div class="overlay">
            <div class="overlay-holder">
                <div class="overlay_container">
                    <div class="overlay_heading">
                        <p>Are you sure you want to logout?</p>
                    </div>
                    <div class="stayback-button-holder">
                        <button class="stayback">No, Stay in</button>
                    </div>
                    <div class="logout-button-holder">
                        <button class="logout">Yes, logout</button>
                    </div>
                </div>
            </div>
        </div>
        <%- include('../partials/foot'); %>
            <script>
                document.querySelector('.dashboard-button').addEventListener('click', () => {
                    window.location.href = 'Dashboard.html'
                })
                document.querySelector('.changepassword-button').addEventListener('click', () => {
                    window.location.href = '/changepassword'
                })
                document.querySelector('.logout-button').addEventListener('click', () => {
                    document.querySelector('.overlay').style.display = 'block'
                })
                document.querySelector('.stayback').onclick = () => {
                    document.querySelector('.overlay').style.display = 'none'
                }

                document.querySelector('.logout').addEventListener('click', async () => {
                    try {
                        const res = await fetch('/logout', {
                            method: 'post',
                            headers: {
                                'content-type': 'application/json'
                            }
                        })
                        if (res.ok) {
                            console.log('Logout Successfull')
                            window.location.href = '/login'
                        }
                        else {
                            console.error('logout failed')
                        }
                    }
                    catch (err) {
                        console.log(err)
                    }
                })


            </script>